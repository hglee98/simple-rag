# FFmpeg, WebRTC(WHIP) 초저지연 스트리밍 지원 머지


* **FFmpeg**에 **WHIP(WebRTC-HTTP Ingestion Protocol) muxer**가 정식 추가되어 **1초 미만 초저지연 스트리밍**을 직접 지원함
* 이번 커밋에서 **WHIP muxer**의 네이밍 및 구조가 개편되고, **SSL/DTLS/RTC 오류 메시지와 로그**가 개선됨
* **DTLS 곡선/프로파일, RTP payload, ICE STUN 등** 주요 프로토콜 파라미터가 크롬 정의에 맞게 업데이트되고, **매직 넘버**가 매크로 및 함수로 추출됨
* **DTLS 핸드셰이크와 ICE 처리**가 하나의 함수로 통합 및 최적화되어 **성능과 안정성**이 크게 향상됨
* **오디오, 비디오 트랜스코딩**(h264\_mp4toannexb, OPUS timestamp, 마커 설정 등) 버그가 해결되어 표준 WebRTC 환경과 호환성 증가
* **OpenSSL** 의존성을 명확히 하여, DTLS 지원 시에만 WHIP가 빌드됨
* FFmpeg만으로 **WebRTC 기반 방송·실시간 스트림** 환경 구축이 쉬워지고, 기존 RTMP 등 레거시 프로토콜 대비 초저지연 특성을 활용할 수 있게 됨

---

avformat/whip: FFmpeg WHIP muxer 지원 추가
--------------------------------------

### 주요 변경점 요약

* **WHIP Version 3** 기반 muxer 정식 도입, 내부 명칭 및 구조 정비
* SSL, DTLS, RTC의 **로그 컨텍스트와 에러 메시지**가 한층 명확해짐
* 하드코딩된 **매직 넘버**를 매크로와 별도 함수로 추출해 유지보수성 강화
* DTLS 곡선 리스트, SRTP 프로파일명 등 **FFmpeg와 OpenSSL 표준**에 맞춰 수정
* **ICE STUN 매직 넘버, RTP 페이로드 타입**이 크롬 브라우저 표준과 일치하도록 업데이트
* 오디오 프레임 크기, H.264 MP4→AnnexB 변환, OPUS 타임스탬프 등 **미디어 처리 이슈** 해결
* DTLS 핸드셰이크와 ICE 처리 로직이 **단일 함수로 통합**되어 관리 용이
* OpenSSL 기반 DTLS 지원 조건이 명확해져, **빌드 오류 및 호환성** 개선
* SRTP, BIO 콜백, CA 키/인증서 초기화 등 **TLS/DTLS 내부 구조 통합**
* whip.c 파일 신설 등 **총 13개 파일** 변경 및 신규 추가

### 배경 및 의미

* **WHIP**는 WebRTC 기반 스트림 송출을 위한 HTTP 기반 표준 프로토콜로, 초저지연 라이브 방송에 필수적임
* 그동안 FFmpeg에서 WebRTC 인코딩·송출은 별도 툴이나 복잡한 중계가 필요했으나, 이번 머지로 **FFmpeg 단일 명령어로 WHIP 송출**이 가능해짐
* 실시간 방송, 라이브 커머스, 화상회의 등 다양한 분야에서 **최신 WebRTC 생태계와 직접 연동**할 수 있는 기술적 전환점
