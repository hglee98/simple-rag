# 내 언어를 추측하지 마세요


* **IP 기반 언어 설정**은 잘못된 전제에 근거한 기능임
* **IP 주소**는 위치만 알려줄 뿐, 사용자의 실제 언어 선호를 반영하지 못함
* **Accept-Language 헤더**가 언어 선호 정보를 정확히 전달함
* UI 언어는 **신뢰할 수 있는 신호**인 브라우저 헤더를 기반으로 설정 필요
* 사용자의 언어 선택권과 **경험 존중**이 가장 중요한 원칙임

---

IP로 추정하는 언어 설정의 한계
------------------

* 여전히 **IP 지리정보(GeoIP)** 로 사용 언어를 결정하는 행위는 잘못된 가정임
* IP 주소는 단지 **요청 위치 정보**만 제공함
* 사용자가 실제로 **선호하거나 이해하는 언어**를 파악하지 못함
* VPN, 해외여행, 해외 거주, **복수 공식 언어 국가** 등 다양한 상황에서 자주 실패 발생
* 이런 방식은 똑똑함이 아닌 **불편과 혼란 초래**임

공식 언어 개수와 현실의 괴리
----------------

* 국가와 IP 정보는 언어와 1:1 매핑이 아님
  + **Belgium**은 3개, **Switzerland**는 4개, **India**는 22개, **Canada**는 공식적으로 2개, 사실상 다국어 국가임
* 사용자는 해당 국가에 거주, 방문, 혹은 우연히 트래픽이 해당 국가를 통해 경유되는 경우가 있음
* 단순 국가 정보만으로 한 가지 **UI 언어 강제 노출**은 잘못된 행동임

잘못된 엔지니어링의 예
------------

* 잘못된 데이터에 의존하는 것은 **게으른 개발 방식**임
* “대형 웹사이트도 이렇게 한다”는 변명은 올바르지 않음
* **정확**하게 처리하지 못할 바에야 차라리 아무 것도 하지 않는 편이 나음

Accept-Language 헤더의 가치
----------------------

* 많은 사용자가 **VPN 사용** 등으로 새로운 언어가 강제 노출되어 불편 경험
* 모든 브라우저는 **Accept-Language 헤더**를 전송함
  + 사용자의 **OS 또는 브라우저 설정**에 따라 언어 선호가 지정됨
  + 사용자가 원하는 경우 직접 이 값을 설정, 변경할 수 있음
  + 예시: `Accept-Language: en-US,en;q=0.9,de;q=0.8`
* 이 헤더는 **정확, 무료, 이미 내장**, 라이선스나 추가 유지보수가 필요 없는 정보임

올바른 언어 처리 방법
------------

* 화면 해상도나 색상처럼, **언어도 사용자의 환경**을 존중해야 함
* 영어 사용자에게 프랑스에서 영어로, 브뤼셀의 프랑스 사용자는 네덜란드어로, 홍콩 VPN 사용자에게는 중국어로 노출 등과 같이 엉뚱한 언어 지정 빈번히 발생
* 사용자 불만, 서비스 이탈, UI 탐색 끝에 임시 해결 시도 등 문제가 생김
* 이런 실수는 **신뢰할 수 없는 IP 데이터**를 언어 판단 근거로 삼았기 때문임

실질적 해결 방안
---------

* *Accept-Language 읽기*
* *이 값 존중하기*
* *원할 경우 사용자가 직접 언어를 변경 가능하게 지원* (선택 사항은 쿠키나 URL 파라미터에 저장)
* GeoIP 정보는 **통화, 배송, 법적 요소**에만 사용하고 **언어에는 적용 금지**

결론
--

* 사람이 사용하는 소프트웨어라면, **사용자 선호를 추측**해서는 안 됨
* **정확하게 구현**하거나, 아예 언어 지정 기능을 제공하지 않는 것이 바람직함
